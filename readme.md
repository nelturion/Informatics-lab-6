# Лабораторная работа: мониторинг ресурсов

## Разминка:

Для начала разберемся с тем, как получить данные о процессах.

С помощью утилиты htop можно подробно узнать обо всех запущенных процессах

```shell
   sudo apt install htop
   htop
```

Теперь мы видим диспетчер задач аналогичный всем нам так знакомому.
Но как получать отсюда данные, которые можно было бы автоматически отслеживать и в зависимости от них управлять своей системой?
Воспользуемся другой утилитой ps

```shell
  ps -eo pid,%cpu,command --sort=-%cpu
```

Эта команда вывела нам данные обо всех ныне работающих процессах - их
PID, нагрузку на CPU и команду, которой они были вызваны. Процессы были отсортированы по убыванию используемых ресурсов процессора.

##  Задание

1) Напишите программу на Python, которая будет съедать большое
количество вычислительных ресурсов вашей виртуальной машины. Протестируйте её.
2) Напишите bash скрипт, который будет анализировать нагрузку
на систему и выводить PID процесса, занимающего больше 50% памяти или процессора. 
Если таких процессов нет, то пусть выводит три самых тяжелых процесса (по
памяти и по нагрузке на CPU)

Подсказка про поиск данных в ps:

> Данные из ps будут приходить нам в формате текста, поэтому для их фильтрации стоит использовать команду awk. Синтаксис команды awk:
> 
> фильтрация по шаблону:
> 
> > awk '/шаблон/ {действия;}'
> 
> Пример:
> 
>   ```bash
>      array="10 25 55" # допустим, у нас есть некоторый массив.
>      # NF - не рэпер, а встроенная переменная awk, которая хранит количество полей в строке
>      echo $array | awk '{for(i=1; i<=NF; i++) if($i > 40) print $i}
>   ```
> Соответственно, этот скрипт выведет 55 в терминале (все числа массива, которые >40).
>

## Как успешно сдать работу?

Знать как писать скрипты на bash. Знать немного python. ~~Шарить.~~

## Ресурсы и справочная литература:
1) самый достоверный источник:
 ```bash
    man ps
    ps --help
 ```
2) [Что такое htop](https://habr.com/ru/articles/316806/)
3) [Другие средства мониторинга системы](https://habr.com/ru/companies/ua-hosting/articles/281519/)
4) [Про язык программирования awk](https://rus-linux.net/MyLDP/consol/awk.html)
